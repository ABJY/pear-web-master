@using Microsoft.AspNet.Identity
@model NTU_FYP_REBUILD_17.ViewModels.PatientOverviewViewModel

@{
    ViewBag.Title = "View Patient";
    Layout = "~/Views/Shared/_LayoutGuardian.cshtml";

    if (ViewBag.Modal == "true")
    {
        <script type="text/javascript">
            $(window).on('load', function () {
                $('#MyModal').modal('show');
            });
        </script>
    }
    else if (ViewBag.Modal3 == "true")
    {
        <script type="text/javascript">
            $(window).on('load', function () {
                $('#MyModal3').modal('show');
            });
        </script>
    }
    else if (ViewBag.AddMedication == "true")
    {
        <script type="text/javascript">
            $(window).on('load', function () {
                $('#addMedication').modal('show');
            });
        </script>
    }
}

<style>
    .forscroll {
        width: 100%;
        max-height: 300px;
        overflow-y: scroll;
    }

    .row > .column {
        padding: 0 8px;
    }

    .row:after {
        content: "";
        display: table;
        clear: both;
    }
    /* Create four equal columns that floats next to eachother */
    .column {
        float: left;
        width: 20%;
    }
    /* The Modal (background) */
    .modal2 {
        display: none;
        position: fixed;
        z-index: 1;
        padding-top: 100px;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: black;
    }
    /* Modal Content */
    .modal2-content {
        position: relative;
        background-color: #fefefe;
        margin: auto;
        padding: 0;
        width: 90%;
        max-width: 500px;
    }
    /* The Close Button */
    .close2 {
        color: white;
        position: absolute;
        top: 10px;
        right: 25px;
        font-size: 35px;
        font-weight: bold;
    }

        .close2:hover,
        .close2:focus {
            color: #999;
            text-decoration: none;
            cursor: pointer;
        }
    /* Hide the slides by default */
    .mySlides {
        display: none;
    }

    /* Next & previous buttons
    .prev,
    .next {
        cursor: pointer;
        position: absolute;
        top: 50%;
        width: auto;
        padding: 16px;
        margin-top: -50px;
        color: white;
        font-weight: bold;
        font-size: 20px;
        transition: 0.6s ease;
        border-radius: 0 3px 3px 0;
        user-select: none;
        -webkit-user-select: none;
    }
    Position the "next button" to the right
    .next {
        right: 0;
        border-radius: 3px 0 0 3px;
    }
    On hover, add a black background color with a little bit see-through
    .prev:hover,
    .next:hover {
        background-color: rgba(0, 0, 0, 0.8);
    }
    /* Number text (1/3 etc) */
    .numbertext {
        color: #f2f2f2;
        font-size: 12px;
        padding: 8px 12px;
        position: absolute;
        top: 0;
    }
    /* Caption text */
    .caption-container {
        text-align: center;
        background-color: black;
        padding: 2px 16px;
        color: white;
    }

    close img.demo {
        opacity: 0.6;
    }

    .active,
    .demo:hover {
        opacity: 1;
    }

    img.hover-shadow {
        transition: 0.3s;
    }

    .hover-shadow:hover {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
    }

    #imageTitle1 {
        display: inline-block;
        margin-left: 120px;
        margin-right: 30px;
    }

    #imageUpload1 {
        display: inline-block;
        margin-right: 30px;
    }

    .weekDays-selector input {
        display: none !important;
    }

        .weekDays-selector input[type=checkbox] + label {
            display: inline-block;
            border-radius: 6px;
            background: #dddddd;
            height: 40px;
            width: 40px;
            margin-right: 3px;
            line-height: 40px;
            text-align: center;
            cursor: pointer;
        }

        .weekDays-selector input[type=checkbox]:checked + label {
            background: #000;
            color: #ffffff;
        }
</style>

<link href="~/Content/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/clockface/css/clockface.css" rel="stylesheet" type="text/css" />

<div class="portlet light ">
    <div class="portlet-title tabbable-line">
        <div class="caption caption-md">
            <i class="icon-globe theme-font hide"></i>
            <span class="caption-subject font-blue-madison bold uppercase">@Model.patient.preferredName's profile</span>
        </div>
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#tab_1_0" data-toggle="tab">Overview</a>
            </li>
            <li class="inactive">
                <a href="@Url.Action("GetSchedule", "Guardian" , new { patientID=@Model.patient.patientID })">Schedule</a>
            </li>
            <li class="inactive">
                <a href="@Url.Action("GetAttendance", "Guardian" , new { patientID=@Model.patient.patientID })">Attendance</a>
            </li>
        </ul>
    </div>
    <div class="portlet-body">
        <div class="tab-content">
            <div class="tab-pane active" id="tab_1_0">
                <div class="portlet light ">
                    <div class="portlet-body">
                        @Html.HiddenFor(p => p.patient.patientID, new { @Value = @Model.patient.patientID, @id = "a1" })
                        <div class="tabbable-line tabbable-full-width">
                            <!--<ul class="nav nav-tabs">
                                <li class="active">
                                    <a href="#tab_1_1" data-toggle="tab"> Overview</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab_1_1">-->
                            <div class="row">
                                <div class="col-md-3" style="width:20%; text-align:center">
                                    <ul class="list-unstyled profile-nav">
                                        <li>
                                            <img src="@Model.imageUrl" class="img-responsive pic-bordered" alt="" width="400" height="400" />
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-9" style="width:80%">
                                    <div class="tabbable-line tabbable-custom-profile">
                                        <div class="portlet light portlet-fit ">
                                            <div class="tabbable-line tabbable-custom-profile">
                                                <ul class="nav nav-tabs">
                                                    <li class="@ViewBag.Info">
                                                        <a href="#tab_1_11" data-toggle="tab"> Information </a>
                                                    </li>
                                                    <li class="@ViewBag.History">
                                                        <a href="#tab_1_22" data-toggle="tab"> History </a>
                                                    </li>
                                                    <li class="@ViewBag.Album">
                                                        <a href="#tab_1_33" data-toggle="tab"> Photo Album </a>
                                                    </li>
                                                    <li class="@ViewBag.Privacy">
                                                        <a href="#tab_1_44" data-toggle="tab"> Privacy Settings </a>
                                                    </li>
                                                </ul>
                                                <div class="tab-content">
                                                    <div class="tab-pane @ViewBag.Info" id="tab_1_11">
                                                        <div class="portlet-body" align="center">
                                                            @if (Model.isMainGuardian == 1)
                                                            {
                                                                <div style="color:red; text-align:center">You may edit as a main guardian</div>
                                                            }
                                                            else
                                                            {
                                                                <div style="color:red; text-align:center">You do not have the permission to edit as a secondary guardian</div>
                                                            }
                                                            <div class="portlet light">
                                                                <div class="portlet-body">
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-gamepad font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Information</span>
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr>
                                                                                        <TD align="left" valign="top" width="50%">
                                                                                            <table cellpadding="3%">
                                                                                                <tr>
                                                                                                    <td>First Name <b>@Model.patient.firstName</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Last Name <b>@Model.patient.lastName</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Preferred Name <b>@Model.patient.preferredName</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    @if (Model.patient.gender == "M")
                                                                                                    {
                                                                                                        <td>Gender <b> Male </b></td>
                                                                                                    }
                                                                                                    else
                                                                                                    {
                                                                                                        <td>Gender <b> Female </b></td>
                                                                                                    }
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>NRIC <b>@Model.patient.nric</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Date of Birth <b>@Model.patient.DOB.ToString("dd/MM/yyyy")</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Preferred Lanuage <b>@Model.language</b></td>
                                                                                                </tr>
                                                                                                <tr></tr>
                                                                                            </table>
                                                                                        </TD>
                                                                                        <TD align="left" valign="top" width="50%">
                                                                                            <table cellpadding="3%">
                                                                                                <tr>
                                                                                                    <td>Address <b>@Model.patient.address</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Temporary Address <b>@Model.patient.tempAddress</b></td>
                                                                                                </tr>
                                                                                                @if (@Model.patient.homeNo != null)
                                                                                                {
                                                                                                    <tr>
                                                                                                        <td>Home No <b>@Model.patient.homeNo</b></td>
                                                                                                    </tr>
                                                                                                }
                                                                                                @if (@Model.patient.handphoneNo != null)
                                                                                                {
                                                                                                    <tr>
                                                                                                        <td>Handphone No <b>@Model.patient.handphoneNo</b></td>
                                                                                                    </tr>
                                                                                                }
                                                                                                <tr>
                                                                                                    <td>&nbsp;</td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>Start Date <b>@Model.patient.startDate.ToString("dd/MM/yyyy")</b></td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        End Date
                                                                                                        @if (Model.patient.endDate != null)
                                                                                                        {
                                                                                                            <b>@(((DateTime)Model.patient.endDate).ToString("dd/MM/yyyy"))</b>
                                                                                                        }
                                                                                                    </td>
                                                                                                </tr>
                                                                                                <tr>
                                                                                                    <td>
                                                                                                        Inactive Date
                                                                                                        @if (Model.patient.inactiveDate != null)
                                                                                                        {
                                                                                                            <b>@(((DateTime)Model.patient.inactiveDate).ToString("dd/MM/yyyy"))</b>
                                                                                                        }
                                                                                                    </td>
                                                                                                </tr>
                                                                                            </table>

                                                                                        </TD>
                                                                                    </tr>
                                                                                </thead>
                                                                            </table>
                                                                        </div>
                                                                        @if (Model.isMainGuardian == 1)
                                                                        {
                                                                            <a class="btn green btn-outline sbold uppercase" href="@Url.Action("UpdatePatient", "Guardian" , new { patientID=@Model.patient.patientID })"><i class="fa fa-plus"></i> Update Information </a>
                                                                        }
                                                                        <hr />
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 0)
                                                                    {
                                                                        <div class="portlet light portlet-fit ">
                                                                            <div class="portlet-title">
                                                                                <div class="caption">
                                                                                    <i class="fa fa-file-text-o font-red"></i>
                                                                                    <span class="caption-subject font-red sbold uppercase">Main Guardian Information</span>
                                                                                </div>
                                                                            </div>
                                                                            <div>
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr>
                                                                                            <TD align="left" valign="top" width="50%">
                                                                                                <table cellpadding="3%">
                                                                                                    <tr>
                                                                                                        <td>First Name <b>@Model.mainGuardian.firstName</b></td>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Last Name <b>@Model.mainGuardian.lastName</b></td>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Preferred Name <b>@Model.mainGuardian.preferredName</b></td>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        @if (Model.mainGuardian.gender == "M")
                                                                                                        {
                                                                                                            <td>Gender <b> Male </b></td>
                                                                                                        }
                                                                                                        else
                                                                                                        {
                                                                                                            <td>Gender <b> Female </b></td>
                                                                                                        }
                                                                                                    </tr>
                                                                                                    <tr></tr>
                                                                                                </table>
                                                                                            </TD>
                                                                                            <TD align="left" valign="top" width="50%">
                                                                                                <table cellpadding="3%">
                                                                                                    <tr>
                                                                                                        <td>Address <b>@Model.mainGuardian.address</b></td>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Handphone No <b>@Model.mainGuardian.PhoneNumber</b></td>
                                                                                                    </tr>
                                                                                                    <tr>
                                                                                                        <td>Office No <b>@Model.mainGuardian.officeNo</b></td>
                                                                                                    </tr>
                                                                                                </table>
                                                                                            </TD>
                                                                                        </tr>
                                                                                    </thead>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    }
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Diagnosed Dementia</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Dementia Type </th>
                                                                                            <th> Diagnosed Date </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.diagnosedDementia.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.dementia.dementiaType</td>
                                                                                                <td>@i.value.pad.createdDateTime</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Most Recent Vital Information</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> Date </th>
                                                                                            <th> Time </th>
                                                                                            <th> Temperature </th>
                                                                                            <th> Systolic BP </th>
                                                                                            <th> Diastolic BP </th>
                                                                                            <th> Heart Rate </th>
                                                                                            <th> SpO2 </th>
                                                                                            <th> Blood Sugar Level </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        <tr>
                                                                                            <td>@Model.vital.createDateTime.ToString("dd/MM/yyyy")</td>
                                                                                            <td>@Model.vital.createDateTime.ToString("HH:mm")</td>
                                                                                            <td>@Model.vital.temperature</td>
                                                                                            <td>@Model.vital.systolicBP</td>
                                                                                            <td>@Model.vital.diastolicBP</td>
                                                                                            <td>@Model.vital.heartRate</td>
                                                                                            <td>@Model.vital.spO2</td>
                                                                                            <td>@Model.vital.bloodSugarlevel</td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Daily Updates</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Dementia Status </th>
                                                                                            <th> Date </th>
                                                                                            <th> Staff </th>
                                                                                            <th> Notes </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.dailyUpdates.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.dailyUpdates.dementiaStatus</td>
                                                                                                <td>@i.value.dailyUpdates.createDateTime.ToString("dd/MM/yyyy")</td>
                                                                                                <td>@i.value.user.firstName @i.value.user.lastName</td>
                                                                                                <td>@i.value.dailyUpdates.notes</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Medication</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Drug Name </th>
                                                                                            <th> Start Date </th>
                                                                                            <th> End Date </th>
                                                                                            <th> Status </th>
                                                                                            <th> Dosing Frequency </th>
                                                                                            <th> Dosage </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.patientPrescriptions.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.PrescriptionName</td>
                                                                                                <td>@i.value.prescription.startDate.ToString("dd/MM/yyyy")</td>
                                                                                                @if (i.value.prescription.endDate == null)
                                                                                                {
                                                                                                    <td></td> }
                                                                                                else
                                                                                                {
                                                                                                    <td>@i.value.prescription.endDate.Value.ToString("dd/MM/yyyy")</td> }
                                                                                                @if (i.value.status == 1)
                                                                                                {
                                                                                                    <td><span class="fa fa-lg fa-check space text-success">Active</span></td> }
                                                                                                else
                                                                                                {
                                                                                                    <td><span class="fa fa-lg fa-times space text-danger">Inactive</span></td> }
                                                                                                <td>@i.value.prescription.frequencyPerDay times a day</td>
                                                                                                <td>@i.value.prescription.dosage</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Doctor Note</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Date </th>
                                                                                            <th> Doctor Name </th>
                                                                                            <th> Notes </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.doctorNote.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.doctorNote.createDateTime.ToString("dd/MM/yyyy")</td>
                                                                                                <td>@i.value.doctor.firstName @i.value.doctor.lastName</td>
                                                                                                <td>@i.value.doctorNote.note</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Mobility Aids</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Mobility Aids </th>
                                                                                            <th></th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.mobility.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.mobilityType</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Problem</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Category </th>
                                                                                            <th> Description </th>
                                                                                            <th> Date </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.patientProblemLog.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.problemName</td>
                                                                                                <td>@i.value.problemLog.notes</td>
                                                                                                <td>@i.value.problemLog.createdDateTime.ToString("dd/MM/yyyy")</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Assigned Game</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Game Title </th>
                                                                                            <th> Category </th>
                                                                                            <th> Assigned Date </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.game.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.game.gameName</td>
                                                                                                <td>@i.value.gameCategory</td>
                                                                                                <td>@i.value.game.createDateTime.ToString("dd/MM/yyyy")</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Game Played</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body forscroll">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> No </th>
                                                                                            <th> Game Title </th>
                                                                                            <th> Play Count </th>
                                                                                            <th> Last Played Date </th>
                                                                                            <th> Last Played Time </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.gameRecordList.Select((value, index) => new { index, value }))
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@( i.index + 1 )</td>
                                                                                                <td>@i.value.gameName</td>
                                                                                                <td>@i.value.playCount</td>
                                                                                                <td>@i.value.lastPlayed.ToString("dd/MM/yyyy")</td>
                                                                                                <td>@i.value.lastPlayed.ToString("HH:mm")</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet light portlet-fit ">
                                                                        <div class="portlet-title">
                                                                            <div class="caption">
                                                                                <i class="fa fa-file-text-o font-red"></i>
                                                                                <span class="caption-subject font-red sbold uppercase">Staff Allocation</span>
                                                                            </div>
                                                                        </div>
                                                                        <div class="portlet-body">
                                                                            <div class="table-scrollable table-scrollable-borderless">
                                                                                <table class="table table-hover table-light">
                                                                                    <thead>
                                                                                        <tr class="uppercase">
                                                                                            <th> Staff Role </th>
                                                                                            <th> Staff Name </th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody>
                                                                                        @foreach (var i in Model.staffAllocation)
                                                                                        {
                                                                                            <tr>
                                                                                                <td>@i.staffRole</td>
                                                                                                <td>@i.staffName</td>
                                                                                            </tr>
                                                                                        }
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane @ViewBag.History" id="tab_1_22">
                                                        <div class="portlet-body" align="center">
                                                            @if (Model.isMainGuardian == 1)
                                                            {
                                                                <div style="color:red; text-align:center">You may edit as a main guardian</div>
                                                            }
                                                            else
                                                            {
                                                                <div style="color:red; text-align:center">You do not have the permission to edit as a secondary guardian</div>
                                                            }
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">Medical History</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body forscroll">
                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr class="uppercase">
                                                                                    <th> No </th>
                                                                                    <th> Medical Details </th>
                                                                                    <th> Information Source </th>
                                                                                    <th> Medical Estimated Date </th>
                                                                                    <th> Notes </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @foreach (var i in Model.medicalHistory.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    <tr>
                                                                                        <td>@( i.index + 1 )</td>
                                                                                        <td>@i.value.medicalDetails</td>
                                                                                        <td>@i.value.informationSource</td>
                                                                                        <td>@i.value.medicalEstimatedDate.ToString("dd/MM/yyyy")</td>
                                                                                        <td>@i.value.notes</td>
                                                                                        @if (Model.isMainGuardian == 1)
                                                                                        {
                                                                                            <td><a id="@i.value.medicalHistoryID" class="btn dark btn-sm btn-outline sbold uppercase" data-target="#updateMedicalHistory" data-toggle="modal" onclick="OpenModalMedicalHistory(this.id);"><i class="fa fa-edit"></i> Update</a></td>
                                                                                        }
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                @if (Model.isMainGuardian == 1)
                                                                {
                                                                    <a class="btn green btn-outline sbold uppercase" data-target="#addMedication" data-toggle="modal"><i class="fa fa-plus"></i> Add Medical History </a>
                                                                }
                                                                <hr />
                                                            </div>
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">Routine</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body forscroll">
                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr class="uppercase">
                                                                                    <th> No </th>
                                                                                    <th> Activity Title </th>
                                                                                    <th> Start Date </th>
                                                                                    <th> End Date </th>
                                                                                    <th> Start Time </th>
                                                                                    <th> End Time </th>
                                                                                    <th> Approved </th>
                                                                                    <th> Included </th>
                                                                                    <th> Notes </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @foreach (var i in Model.routine.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    <tr>
                                                                                        <td>@( i.index + 1 )</td>
                                                                                        <td>@i.value.eventName</td>
                                                                                        <td>@i.value.startDate.ToString("dd/MM/yyyy")</td>
                                                                                        <td>@i.value.endDate.ToString("dd/MM/yyyy")</td>
                                                                                        <td>@i.value.startTime.ToString().Substring(0, 5)</td>
                                                                                        <td>@i.value.endTime.ToString().Substring(0, 5)</td>
                                                                                        @if (i.value.isApproved == 1)
                                                                                        {
                                                                                            <td>Yes</td>
                                                                                            if (i.value.includeInSchedule == 1)
                                                                                            {
                                                                                                <td><span class="fa fa-lg fa-check space text-success">Included</span></td>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <td><span class="fa fa-lg fa-times space text-danger">Excluded <a class="fa fa-info-circle" data-toggle="desc" title="@i.value.reasonForExclude"></a></span></td>
                                                                                            }
                                                                                        }
                                                                                        else if (i.value.isApproved == 0)
                                                                                        {
                                                                                            <td>No</td>
                                                                                            <td></td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>Pending</td>
                                                                                            <td></td>
                                                                                        }
                                                                                        <td>@i.value.notes</td>
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                @if (Model.isMainGuardian == 1)
                                                                {
                                                                    <a class="btn green btn-outline sbold uppercase" data-target="#addRoutine" data-toggle="modal"><i class="fa fa-plus"></i> Add Routine </a>
                                                                }
                                                                <hr />
                                                            </div>
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">Preferences</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body forscroll">
                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr class="uppercase">
                                                                                    <th> No </th>
                                                                                    <th> Activity Title </th>
                                                                                    <th> Preferences </th>
                                                                                    <th> Excluded </th>
                                                                                    <th> Doctor's Recommended </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @foreach (var i in Model.listOfActivity.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    <tr>
                                                                                        <td>@( i.index + 1 )</td>
                                                                                        <td>@i.value.actPreference.CentreActivity.activityTitle
                                                                                        <td>
                                                                                            <div class="form-group">
                                                                                                <div class="col-md-10">
                                                                                                    @if (i.value.actPreference.isLike == 1)
                                                                                                    { <span class="fa fa-lg fa-smile-o space text-success"> Like</span> }
                                                                                                    else if (i.value.actPreference.isNeutral == 1)
                                                                                                    { <span class="fa fa-lg fa-meh-o space text-warning"> Neutral</span> }
                                                                                                    else if (i.value.actPreference.isDislike == 1)
                                                                                                    { <span class="fa fa-lg fa-frown-o space text-danger"> Dislike</span> }
                                                                                                </div>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td>
                                                                                            @if (i.value.activityExcluded != null)
                                                                                            { <span class="fa fa-lg fa-times space text-danger"> Excluded <a class="fa fa-info-circle" data-toggle="desc" title="@i.value.activityDesc"></a></span> }
                                                                                            else
                                                                                            { <span class="fa fa-lg fa-check space text-success"> Not Excluded</span> }
                                                                                        </td>
                                                                                        <td>
                                                                                            @if (i.value.actPreference.doctorRecommendation == 2)
                                                                                            { <span>-</span> }
                                                                                            else if (i.value.actPreference.doctorRecommendation == 1)
                                                                                            { <span>Yes  <a class="fa fa-info-circle" data-toggle="desc" title="Doctor name: @i.value.doctorName"></a></span> }
                                                                                            else
                                                                                            { <span>No  <a class="fa fa-info-circle" data-toggle="desc" title="Doctor name: @i.value.doctorName"></a></span> }
                                                                                        </td>
                                                                                        @if (Model.isMainGuardian == 1 && @i.value.activityID != 3 && @i.value.activityID != 9)
                                                                                        {
                                                                                            <td><a id="@i.value.actPreference.CentreActivity.activityTitle" class="btn dark btn-sm btn-outline sbold uppercase black" data-target="#updatePreferences" data-toggle="modal" onclick="OpenModalPreferences(this.id, '@i.value.preference', '@i.value.doctorName', '@i.value.actPreference.doctorRemarks');"><i class="fa fa-pencil-square-o"></i> View & Modify</a></td>
                                                                                        }
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">Allergies</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body forscroll">
                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr class="uppercase">
                                                                                    <th> No </th>
                                                                                    <th> Allergic To </th>
                                                                                    <th> Reaction </th>
                                                                                    <th> Notes </th>
                                                                                    <th></th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                @foreach (var i in Model.allergy.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    <tr>
                                                                                        <td>@( i.index + 1 )</td>
                                                                                        <td>@i.value.allergyType</td>
                                                                                        <td>@i.value.allergy.reaction</td>
                                                                                        <td>@i.value.allergy.notes</td>
                                                                                        @if (Model.isMainGuardian == 1)
                                                                                        {
                                                                                            <td><a id="@i.value.allergy.allergyID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('allergy', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                        }
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                    </div>
                                                                </div>
                                                                @if (Model.isMainGuardian == 1)
                                                                {
                                                                    <a class="btn green btn-outline sbold uppercase" data-target="#addAllergy" data-toggle="modal"><i class="fa fa-plus"></i> Add Allergy </a>
                                                                }
                                                                <hr />
                                                            </div>
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">Social History</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body">
                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr>
                                                                                    <TD align="left" valign="top" width="30%">
                                                                                        <table class="table table-hover table-light">
                                                                                            <tr>
                                                                                                <td>Alcohol Use</td>
                                                                                                <td><b>@Model.socialHistory.alcoholUse</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Caffeine Use</td>
                                                                                                <td><b>@Model.socialHistory.caffeineUse</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Drug Use</td>
                                                                                                <td><b>@Model.socialHistory.drugUse</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Exercise</td>
                                                                                                <td><b>@Model.socialHistory.exercise</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Retired</td>
                                                                                                <td><b>@Model.socialHistory.retired</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Tobacco Use</td>
                                                                                                <td><b>@Model.socialHistory.tobaccoUse</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Secondhand Smoker</td>
                                                                                                <td><b>@Model.socialHistory.secondhandSmoker</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Sexually Active</td>
                                                                                                <td><b>@Model.socialHistory.sexuallyActive</b></td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </TD>
                                                                                    <TD align="left" valign="top" width="20%"></TD>
                                                                                    <TD align="left" valign="top" width="30%">
                                                                                        <table class="table table-hover table-light">
                                                                                            <tr>
                                                                                                <td>Diet</td>
                                                                                                <td><b>@Model.socialHistory.diet</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Education</td>
                                                                                                <td><b>@Model.socialHistory.education</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Live With</td>
                                                                                                <td><b>@Model.socialHistory.liveWith</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Occupation</td>
                                                                                                <td><b>@Model.socialHistory.occupation</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Pet</td>
                                                                                                <td><b>@Model.socialHistory.pet</b></td>
                                                                                            </tr>
                                                                                            <tr>
                                                                                                <td>Religion</td>
                                                                                                <td><b>@Model.socialHistory.religion</b></td>
                                                                                            </tr>
                                                                                        </table>
                                                                                    </TD>
                                                                                </tr>
                                                                            </thead>
                                                                        </table>
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 1)
                                                                    {
                                                                        <a class="btn green btn-outline sbold uppercase" data-target="#updateSocialHistory" data-toggle="modal"><i class="fa fa-plus"></i> Update Social History </a>
                                                                    }
                                                                    <hr />
                                                                </div>
                                                                <div class="portlet light portlet-fit ">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-file-text-o font-red"></i>
                                                                            <span class="caption-subject font-red sbold uppercase">Likes</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body forscroll">
                                                                        <div class="table-scrollable table-scrollable-borderless">
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr class="uppercase">
                                                                                        <th> No </th>
                                                                                        <th> Like Item </th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @foreach (var i in Model.like.Select((value, index) => new { index, value }))
                                                                                    {
                                                                                        <tr>
                                                                                            <td>@( i.index + 1 )</td>
                                                                                            <td>@i.value.likeItem</td>
                                                                                            @if (Model.isMainGuardian == 1)
                                                                                            {
                                                                                                <td><a id="@i.value.like.likeID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('likes', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                            }
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                @if (Model.isMainGuardian == 1)
                                                                {
                                                                    <a class="btn green btn-outline sbold uppercase" data-target="#addLikes" data-toggle="modal"><i class="fa fa-plus"></i> Add Likes </a>
                                                                }
                                                                <hr />
                                                                <div class="portlet light portlet-fit ">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-file-text-o font-red"></i>
                                                                            <span class="caption-subject font-red sbold uppercase">Dislikes</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body forscroll">
                                                                        <div class="table-scrollable table-scrollable-borderless">
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr class="uppercase">
                                                                                        <th> No </th>
                                                                                        <th> Dislike Item </th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @foreach (var i in Model.dislike.Select((value, index) => new { index, value }))
                                                                                    {
                                                                                        <tr>
                                                                                            <td>@( i.index + 1 )</td>
                                                                                            <td>@i.value.dislikeItem</td>
                                                                                            @if (Model.isMainGuardian == 1)
                                                                                            {
                                                                                                <td><a id="@i.value.dislike.dislikeID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('dislikes', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                            }
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 1)
                                                                    {
                                                                        <a class="btn green btn-outline sbold uppercase" data-target="#addDislikes" data-toggle="modal"><i class="fa fa-plus"></i> Add Dislikes </a>
                                                                    }
                                                                    <hr />
                                                                </div>
                                                                <div class="portlet light portlet-fit ">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-file-text-o font-red"></i>
                                                                            <span class="caption-subject font-red sbold uppercase">Habits</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body forscroll">
                                                                        <div class="table-scrollable table-scrollable-borderless">
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr class="uppercase">
                                                                                        <th> No </th>
                                                                                        <th> Habit </th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @foreach (var i in Model.habit.Select((value, index) => new { index, value }))
                                                                                    {
                                                                                        <tr>
                                                                                            <td>@( i.index + 1 )</td>
                                                                                            <td>@i.value.habitItem</td>
                                                                                            @if (Model.isMainGuardian == 1)
                                                                                            {
                                                                                                <td><a id="@i.value.habit.habitID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('habits', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                            }
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 1)
                                                                    {
                                                                        <a class="btn green btn-outline sbold uppercase" data-target="#addHabits" data-toggle="modal"><i class="fa fa-plus"></i> Add Habits </a>
                                                                    }
                                                                    <hr />
                                                                </div>
                                                                <div class="portlet light portlet-fit ">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-file-text-o font-red"></i>
                                                                            <span class="caption-subject font-red sbold uppercase">Hobbies</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body forscroll">
                                                                        <div class="table-scrollable table-scrollable-borderless">
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr class="uppercase">
                                                                                        <th> No </th>
                                                                                        <th> Hobby </th>
                                                                                        <td></td>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @foreach (var i in Model.hobby.Select((value, index) => new { index, value }))
                                                                                    {
                                                                                        <tr>
                                                                                            <td>@( i.index + 1 )</td>
                                                                                            <td>@i.value.hobbyItem</td>
                                                                                            @if (Model.isMainGuardian == 1)
                                                                                            {
                                                                                                <td><a id="@i.value.hobby.hobbyID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('hobbies', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                            }
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 1)
                                                                    {
                                                                        <a class="btn green btn-outline sbold uppercase" data-target="#addHobbies" data-toggle="modal"><i class="fa fa-plus"></i> Add Hobbies </a>
                                                                    }
                                                                    <hr />
                                                                </div>
                                                                <div class="portlet light portlet-fit ">
                                                                    <div class="portlet-title">
                                                                        <div class="caption">
                                                                            <i class="fa fa-file-text-o font-red"></i>
                                                                            <span class="caption-subject font-red sbold uppercase">Holiday Experiences</span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="portlet-body forscroll">
                                                                        <div class="table-scrollable table-scrollable-borderless">
                                                                            <table class="table table-hover table-light">
                                                                                <thead>
                                                                                    <tr class="uppercase">
                                                                                        <th> No </th>
                                                                                        <th> Country </th>
                                                                                        <th> Photo </th>
                                                                                        <th> Experience </th>
                                                                                        <th> Start Date </th>
                                                                                        <th> End Date </th>
                                                                                        <th></th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody>
                                                                                    @foreach (var i in Model.holiday.Select((value, index) => new { index, value }))
                                                                                    {
                                                                                        <tr>
                                                                                            <td>@( i.index + 1 )</td>
                                                                                            <td>@i.value.country</td>

                                                                                            @if (i.value.holidayExperience.albumPatientID != null)
                                                                                            {
                                                                                                <td><img src="@i.value.albumPath" width="30" height="30" onclick="openModal('Holiday Expereience', '@i.value.albumPath')" class="hover-shadow"></td>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <td></td>
                                                                                            }

                                                                                            <td>@i.value.holidayExperience.holidayExp</td>
                                                                                            @if (i.value.holidayExperience.startDate != null)
                                                                                            {
                                                                                                <td>@(((DateTime)i.value.holidayExperience.startDate).ToString("dd/MM/yyyy"))</td>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <td></td>
                                                                                            }
                                                                                            @if (i.value.holidayExperience.endDate != null)
                                                                                            {
                                                                                                <td>@(((DateTime)i.value.holidayExperience.endDate).ToString("dd/MM/yyyy"))</td>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <td></td>
                                                                                            }
                                                                                            @if (Model.isMainGuardian == 1)
                                                                                            {
                                                                                                <td><a id="@i.value.holidayExperience.holidayExpID" class="btn dark btn-sm btn-outline sbold uppercase red" data-target="#MyModal1" data-toggle="modal" onclick="OpenModalPopUp('holidayExperience', this.id);"><i class="fa fa-trash-o"></i> Delete</a></td>
                                                                                            }
                                                                                        </tr>
                                                                                    }
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                    @if (Model.isMainGuardian == 1)
                                                                    {
                                                                        <a class="btn green btn-outline sbold uppercase" data-target="#addHolidayExperiences" data-toggle="modal"><i class="fa fa-plus"></i> Add Holiday Experiences </a>
                                                                    }
                                                                    <hr />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="tab-pane @ViewBag.Album" id="tab_1_33">
                                                        @if (Model.isMainGuardian == 1)
                                                        {
                                                            <div style="color:red; text-align:center">You may edit as a main guardian</div><br />
                                                        }
                                                        else
                                                        {
                                                            <div style="color:red; text-align:center">You do not have the permission to edit as a secondary guardian</div>
                                                        }
                                                        @if (Model.isMainGuardian == 1)
                                                        {
                                                            <div style="text-align:center">
                                                                <a class="btn green btn-outline sbold uppercase" data-target="#MyModal3" data-toggle="modal"><i class="fa fa-plus"></i> Add Photo </a>
                                                            </div>
                                                        }
                                                        @foreach (var album in Model.albumList)
                                                        {
                                                            <div class="portlet light portlet-fit ">
                                                                <div class="portlet-title">
                                                                    <div class="caption">
                                                                        <i class="fa fa-file-text-o font-red"></i>
                                                                        <span class="caption-subject font-red sbold uppercase">@album.albumName</span>
                                                                    </div>
                                                                </div>
                                                                <div class="portlet-body">
                                                                    <!-- The grid: four columns -->
                                                                    <div class="row">
                                                                        @foreach (var item in album.albumPatient)
                                                                        {
                                                                            <div class="column">
                                                                                <img src="@item.albumPath" width="100" height="100" onclick="openModal('@album.albumName', '@item.albumPath')" class="hover-shadow">
                                                                                <br /><br />
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        }
                                                        @if (Model.isMainGuardian == 1)
                                                        {
                                                            <div style="text-align:center">
                                                                <a class="btn green btn-outline sbold uppercase" data-target="#MyModal3" data-toggle="modal"><i class="fa fa-plus"></i> Add Photo </a>
                                                            </div>
                                                        }
                                                        <hr />
                                                    </div>
                                                    <div class="tab-pane @ViewBag.Privacy" id="tab_1_44">
                                                        @if (Model.isMainGuardian == 1)
                                                        {
                                                            <div style="color:red; text-align:center">You may edit as a main guardian</div>
                                                        }
                                                        else
                                                        {
                                                            <div style="color:red; text-align:center">You do not have the permission to edit as a secondary guardian</div>
                                                        }
                                                        <div class="portlet light portlet-fit ">
                                                            <div class="portlet-title">
                                                                <div class="caption">
                                                                    <i class="fa fa-file-text-o font-red"></i>
                                                                    <span class="caption-subject font-red sbold uppercase">Privacy Settings</span>
                                                                </div>
                                                            </div>
                                                            <div class="portlet-body">
                                                                @using (Html.BeginForm("UpdatePrivacySettings", "Guardian", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "privacyForm" }))
                                                                {
                                                                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                                                                    <h5><b style='color: red'>Disclaimer:</b> All data provided to the system will be shown to the required Care Centre personnel (Checkboxes that are greyed out)</h5>
                                                                    <br />

                                                                    <div class="table-scrollable table-scrollable-borderless">
                                                                        <table class="table table-hover table-light">
                                                                            <thead>
                                                                                <tr class="uppercase">
                                                                                    <th></th>
                                                                                    <th></th>
                                                                                    <th> Game Therapist </th>
                                                                                    <th> Doctor </th>
                                                                                    <th> Caregiver </th>
                                                                                    <th> Supervisor </th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                <tr>
                                                                                    <td><b>Lifestyle:</b></td>
                                                                                    <td></td>
                                                                                    <td><input type="checkbox" onclick="lsGF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="lsDF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="lsCF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="lsSF(this)" /></td>
                                                                                </tr>

                                                                                @foreach (var i in Model.privacySettingsLifestyle.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    @Html.HiddenFor(p => p.privacySettingsLifestyle[i.index].columnName, new { @Value = @Model.privacySettingsLifestyle[i.index].columnName, @id = "colName" + i.index })
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td>@i.value.columnName</td>
                                                                                        @if (i.value.gameTherapistDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.gameTherapist, new { Name = "lsGD", @id = "oldG" + i.index, @checked = i.value.gameTherapist, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.gameTherapist, new { Name = "lsG", @id = "oldG" + i.index, @checked = i.value.gameTherapist })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsLifestyle[i.index].gameTherapist, new { @Value = "", @id = "newG" + i.index })

                                                                                        @if (i.value.doctorDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.doctor, new { Name = "lsDD", @id = "oldD" + i.index, @checked = i.value.doctor, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.doctor, new { Name = "lsD", @id = "oldD" + i.index, @checked = i.value.doctor })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsLifestyle[i.index].doctor, new { @Value = "", @id = "newD" + i.index })

                                                                                        @if (i.value.caregiverDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.caregiver, new { Name = "lsCD", @id = "oldC" + i.index, @checked = i.value.caregiver, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.caregiver, new { Name = "lsC", @id = "oldC" + i.index, @checked = i.value.caregiver })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsLifestyle[i.index].caregiver, new { @Value = "", @id = "newC" + i.index })

                                                                                        @if (i.value.supervisorDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.supervisor, new { Name = "lsSD", @id = "oldS" + i.index, @checked = i.value.supervisor, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.supervisor, new { Name = "lsS", @id = "oldS" + i.index, @checked = i.value.supervisor })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsLifestyle[i.index].supervisor, new { @Value = "", @id = "newS" + i.index })
                                                                                    </tr>
                                                                                }

                                                                                <tr><td>&nbsp;</td><td></td><td></td><td></td><td></td><td></td></tr>

                                                                                <tr>
                                                                                    <td><b>Personal:</b></td>
                                                                                    <td></td>
                                                                                    <td><input type="checkbox" onclick="pGF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="pDF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="pCF(this)" /></td>
                                                                                    <td><input type="checkbox" onclick="pSF(this)" /></td>
                                                                                </tr>

                                                                                @foreach (var i in Model.privacySettingsPersonal.Select((value, index) => new { index, value }))
                                                                                {
                                                                                    @Html.HiddenFor(p => p.privacySettingsPersonal[i.index].columnName, new { @Value = @Model.privacySettingsPersonal[i.index].columnName, @id = "colName" + (i.index + Model.privacySettingsLifestyle.Count) })
                                                                                    <tr>
                                                                                        <td></td>
                                                                                        <td>@i.value.columnName</td>
                                                                                        @if (i.value.gameTherapistDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.gameTherapist, new { Name = "pGD", @id = "oldG" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.gameTherapist, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.gameTherapist, new { Name = "pG", @id = "oldG" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.gameTherapist })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsPersonal[i.index].gameTherapist, new { @Value = "", @id = "newG" + (i.index + Model.privacySettingsLifestyle.Count) })

                                                                                        @if (i.value.doctorDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.doctor, new { Name = "pDD", @id = "oldD" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.doctor, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.doctor, new { Name = "pD", @id = "oldD" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.doctor })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsPersonal[i.index].doctor, new { @Value = "", @id = "newD" + (i.index + Model.privacySettingsLifestyle.Count) })

                                                                                        @if (i.value.caregiverDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.caregiver, new { Name = "pCD", @id = "oldC" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.caregiver, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.caregiver, new { Name = "pC", @id = "oldC" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.caregiver })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsPersonal[i.index].caregiver, new { @Value = "", @id = "newC" + (i.index + Model.privacySettingsLifestyle.Count) })

                                                                                        @if (i.value.supervisorDisabled || Model.isMainGuardian == 0)
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.supervisor, new { Name = "pSD", @id = "oldS" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.supervisor, @disabled = "disabled" })</td>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <td>@Html.CheckBoxFor(p => i.value.supervisor, new { Name = "pS", @id = "oldS" + (i.index + Model.privacySettingsLifestyle.Count), @checked = i.value.supervisor })</td>
                                                                                        }
                                                                                        @Html.HiddenFor(p => p.privacySettingsPersonal[i.index].supervisor, new { @Value = "", @id = "newS" + (i.index + Model.privacySettingsLifestyle.Count) })
                                                                                    </tr>
                                                                                }
                                                                            </tbody>
                                                                        </table>
                                                                        <hr />
                                                                        @if (Model.isMainGuardian == 1)
                                                                        {
                                                                            <div>
                                                                                <input type="checkbox" id="privacyUpdate" name="privacyUpdate" value="privacyUpdate"> I would like to update the privacy settings. <br />
                                                                                <input type="checkbox" id="privacyTick" name="privacy" value="privacyAgreement">
                                                                                I have read and agree to the
                                                                                <a id="privacyBtn" style="color:blue;">Privacy Policy</a>.
                                                                                <hr />
                                                                                <div align="center">
                                                                                    <input id="resetPrivacy" class="space btn grey" type="button" onclick="window.location.replace('@Url.Action("ResetPrivacySettings", "Guardian", new { patientID = Model.patientID })')" value="Reset to Default" />
                                                                                    <input id="clearPrivacy" class="space btn grey" type="button" onclick="DisableButton();" value="Clear" />
                                                                                    <button id="savePrivacy" type="submit" class="space btn btn-primary">Update Privacy Settings</button>
                                                                                </div>
                                                                            </div>
                                                                        }
                                                                    </div>
                                                                }
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="MyModal1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            @using (Html.BeginForm("Delete", "Guardian", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
            {
                @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                @Html.HiddenFor(p => p.tableName, new { @Value = "", @id = "tableName" })
                @Html.HiddenFor(p => p.itemID, new { @Value = "", @id = "itemID" })

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4>Delete Confirm Message</h4>
                </div>
                <div class="modal-body" align="center">
                    <p>Are you sure you want to delete this item?</p>
                </div>
                <div class="form-group" align="center">
                    <div class="col-md-5">
                        Reason for deleting record<a style="color:red; font-size:large">*</a>
                    </div>
                    <div class="col-md-6">
                        @Html.TextBoxFor(p => p.deleteReason, new { @class = "form-control", required = "required" })
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-default grey" data-dismiss="modal">Cancel</button>
                    <input id="submit" type="submit" class="space btn btn-primary" value="Delete" />
                </div>
            }
        </div>
    </div>
</div>

<!-- The Modal/Lightbox -->
<div id="myModal" class="modal2">
    <span class="close2 cursor" onclick="closeModal()">&times;</span>
    <div class="modal2-content">
        <img src="" id="img" style="width:100%">
    </div>
    <!-- Caption text -->
    <div class="caption-container">
        <p id="caption"></p>
    </div>
</div>

<div class="modal" id="MyModal3" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            @using (Html.BeginForm("uploadImage", "Guardian", FormMethod.Post, new { enctype = "multipart/form-data" }))
            {
                @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4>Add Photo</h4>
                </div>
                <div class="col-md-offset-2">
                    <p style="color:red">@ViewData["Error1"]</p>
                    @Html.ValidationSummary("", new { @class = "text-danger" })
                </div>
                <div class="form-group" align="center">
                    <div class="form-group">
                        <div class="col-md-4 control-label">Album Name<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-6 albumType">
                            @Html.DropDownList("albumType", null, new { @class = "form-control" })
                        </div>
                    </div>
                </div>
                <br /><br />
                <div class="form-group" align="center">
                    <div class="form-group" id="album" style='display:none;'>
                        <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                        <div class="col-md-6">
                            @Html.TextBoxFor(m => m.albumName, new { @class = "form-control" })
                        </div>
                        <br /><br />
                    </div>
                </div>
                <div class="form-group" align="center">
                    <input type="file" name="file" id="file" />
                </div>
                <div class="modal-footer" style="text-align:center">
                    <button class="btn btn-default grey" data-dismiss="modal">Cancel</button>
                    <input id="submit" type="submit" class="space btn btn-primary" value="Submit" />
                </div>
            }
        </div>
    </div>
</div>

<div class="modal fade" id="updateMedicalHistory">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("UpdateMedicalHistory", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    @Html.HiddenFor(p => p.itemID, new { @Value = "", @id = "itemID2" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Update Medical History</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Additional Notes<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.medicalNotes, new { @class = "form-control", @row = "3", @placeholder = "Please type notes here.", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submit" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="updatePreferences">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("UpdatePreference", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    @Html.HiddenFor(p => p.activityTitle, new { @Value = "", @id = "activityTitle2" })

                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Preferences</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Activity Title</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.activityTitle, new { @class = "form-control", @id = "activityTitle", @Value = "", @row = "3", @disabled = "disabled" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Patient's Preference</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.preference, new { @class = "form-control", @id = "preference", @row = "3", @disabled = "disabled" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Doctor Name</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.doctorName, new { @class = "form-control", @id = "doctorName", @row = "3", @disabled = "disabled" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <label class="col-md-4 control-label" for="form_control_1">Doctor Remarks</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.doctorRemarks, new { @class = "form-control", @id = "doctorRemarks", @row = "3", @disabled = "disabled" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="preferenceUpdate" name="preferenceUpdate" value="preferenceUpdate"> I would like to modify the activity preference for the patient <br />
                        </div>
                        <div class="well" id="preference2" style="display:none">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Preference<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.DropDownList("preference", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row" id="preference3" style="display:none">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button type="submit" class="btn blue">Modify</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>


<div class="modal fade" id="addMedication">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddMedication", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Medical History</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Medication Details<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.medicalDetails, new { @class = "form-control", @row = "3", @placeholder = "Please type the details here.", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Additional Notes</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.medicalNotes, new { @class = "form-control", @row = "3", @placeholder = "Please type notes here." })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Source of Information<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.informationSource, new { @class = "form-control", @row = "3", @placeholder = "Please type the medical source here.", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Information Date<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.medicalEstDate, "dd/mm/yyyy", new { @class = "form-control date-picker", @data_date_format = "dd/mm/yyyy", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submit" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addRoutine">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddRoutine", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Routine</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Routine Title<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.activityTitle, new { @class = "form-control", @row = "3", @placeholder = "Please type the routine title here.", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <label class="col-md-4 control-label" for="form_control_1" style="color: #27a4b0">Days<a style="color:red; font-size:large">*</a></label>
                            <div class="weekDays-selector">
                                <input type="checkbox" id="all" class="weekday" />
                                <label for="all">All</label>

                                <input type="checkbox" id="mon" class="weekday" />
                                <label for="mon">Mon</label>
                                @Html.HiddenFor(p => p.monday, new { @class = "form-control", id = "monday" })

                                <input type="checkbox" id="tue" class="weekday" />
                                <label for="tue">Tue</label>
                                @Html.HiddenFor(p => p.tuesday, new { @class = "form-control", id = "tuesday" })

                                <input type="checkbox" id="wed" class="weekday" />
                                <label for="wed">Wed</label>
                                @Html.HiddenFor(p => p.wednesday, new { @class = "form-control", id = "wednesday" })

                                <input type="checkbox" id="thur" class="weekday" />
                                <label for="thur">Thur</label>
                                @Html.HiddenFor(p => p.thursday, new { @class = "form-control", id = "thursday" })

                                <input type="checkbox" id="fri" class="weekday" />
                                <label for="fri">Fri</label>
                                @Html.HiddenFor(p => p.friday, new { @class = "form-control", id = "friday" })

                                @if (Model.patient.isRespiteCare == 1)
                                {
                                    <input type="checkbox" id="sat" class="weekday" />
                                    <label for="sat">Sat</label>
                                    @Html.HiddenFor(p => p.saturday, new { @class = "form-control", id = "saturday" })
                                    <input type="checkbox" id="sun" class="weekday" />
                                    <label for="sun">Sun</label>
                                    @Html.HiddenFor(p => p.sunday, new { @class = "form-control", id = "sunday" })
                                }
                                <span style="display: block; color:red; text-align:center" id="dayError"></span>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Start Date<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.routineStartDate, "dd/mm/yyyy", new { @class = "form-control date-picker", id = "datetimepicker1", @data_date_format = "dd/mm/yyyy", required = "required" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: none; color:red;" id="startDateError"></span>
                                    <span style="display: none; color:red;" id="startDateError1"></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">End Date<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.routineEndDate, "dd/mm/yyyy", new { @class = "form-control date-picker", id = "datetimepicker2", @data_date_format = "dd/mm/yyyy", required = "required" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: none; color:red;" id="endDateError"></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Start Time<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.routineStartTime, new { @id = "timepicker1", @class = "timepicker form-control", @Value = "", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">End Time<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.routineEndTime, new { @id = "timepicker2", @class = "timepicker2 form-control", @Value = "", required = "required" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: none; color:red;" id="endTimeError"></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Notes<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.routineNotes, new { @class = "form-control", @row = "3", @placeholder = "Please type notes here.", required = "required" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitRoutine" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addAllergy">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddAllergy", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Allergy</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Allergic Item<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 allergy" id="allergyList">
                                    @Html.DropDownList("allergy", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="allergyOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.allergyName, new { @class = "form-control", id = "allergyName" })
                                        <span style="display: block; color:red;" id="allergyError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="display: block;" id="allergyRest">
                            <div class="well">
                                <div class="form-group form-md-line-input has-success">
                                    <label class="col-md-4 control-label" for="form_control_1">Reaction</label>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.allergyReaction, new { @class = "form-control", @row = "3", @placeholder = "Please type the allergic reaction here.", id = "reactionName" })
                                        <div class="form-control-focus"> </div>
                                        <span style="display: block; color:red;" id="reactionError"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="well">
                                <div class="form-group form-md-line-input has-success">
                                    <label class="col-md-4 control-label" for="form_control_1">Notes</label>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.allergyNotes, new { @class = "form-control", @row = "3", @placeholder = "Please type notes here." })
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitAllergy" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="updateSocialHistory">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("UpdateSocialHistory", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Update Social History</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Alcohol Use<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.alcoholUse == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.alcoholUse, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.alcoholUse == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.alcoholUse, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.alcoholUse, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.alcoholUse, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Caffeine Use<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.caffeineUse == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.caffeineUse, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.caffeineUse == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.caffeineUse, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.caffeineUse, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.caffeineUse, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Drug Use<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.drugUse == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.drugUse, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.drugUse == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.drugUse, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.drugUse, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.drugUse, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Exercise<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.exercise == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.exercise, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.exercise == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.exercise, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.exercise, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.exercise, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Retired<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.retired == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.retired, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.retired == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.retired, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.retired, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.retired, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Secondhand Smoker<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.secondhandSmoker == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.secondhandSmoker == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.secondhandSmoker, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Sexually Active<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.sexuallyActive == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.sexuallyActive == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.sexuallyActive, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-3 control-label" for="form_control_1">Tobacco Use<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8" type="radio">
                                    @if (Model.socialHistory.tobaccoUse == "Yes")
                                    {
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "1", new { @id = "option1", @checked = "checked" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "0", new { @id = "option2" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "2", new { @id = "option3" })@Html.Label("N/A")
                                    }
                                    else if (Model.socialHistory.tobaccoUse == "No")
                                    {
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "1", new { @id = "option4" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "0", new { @id = "option5", @checked = "checked" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "2", new { @id = "option6" })@Html.Label("N/A")
                                    }
                                    else
                                    {
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "1", new { @id = "option7" })@Html.Label("Yes")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "0", new { @id = "option8" })@Html.Label("No")
                                        @:&nbsp; &nbsp;
                                        @Html.RadioButtonFor(m => m.tobaccoUse, "2", new { @id = "option9", @checked = "checked" })@Html.Label("N/A")
                                    }
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Diet<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 diet" id="dietList">
                                    @Html.DropDownList("diet", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="dietOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.dietName, new { @class = "form-control", id = "dietName" })
                                        <span style="display: block; color:red;" id="dietError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Education<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 education" id="educationList">
                                    @Html.DropDownList("education", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="educationOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.educationName, new { @class = "form-control", id = "educationName" })
                                        <span style="display: block; color:red;" id="educationError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Live With<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 liveWith" id="liveWithList">
                                    @Html.DropDownList("liveWith", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="liveWithOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.liveWithName, new { @class = "form-control", id = "liveWithName" })
                                        <span style="display: block; color:red;" id="liveWithError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Occupation<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 occupation" id="occupationList">
                                    @Html.DropDownList("occupation", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="occupationOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.occupationName, new { @class = "form-control", id = "occupationName" })
                                        <span style="display: block; color:red;" id="occupationError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Pet<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 pet" id="petList">
                                    @Html.DropDownList("pet", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="petOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.petName, new { @class = "form-control", id = "petName" })
                                        <span style="display: block; color:red;" id="petError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Religion<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 religion" id="religionList">
                                    @Html.DropDownList("religion", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="religionOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.religionName, new { @class = "form-control", id = "religionName" })
                                        <span style="display: block; color:red;" id="religionError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitSocialHistory" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addDislikes">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddDislikes", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Dislikes</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Dislike Item<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 dislike" id="dislikeList">
                                    @Html.DropDownList("dislike", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="dislikeOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.dislikeName, new { @class = "form-control", id = "dislikeName" })
                                        <span style="display: block; color:red;" id="dislikeError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitDislike" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addHabits">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddHabits", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Habits</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Habit<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 habit" id="habitList">
                                    @Html.DropDownList("habit", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="habitOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.habitName, new { @class = "form-control", id = "habitName" })
                                        <span style="display: block; color:red;" id="habitError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitHabit" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addHobbies">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddHobbies", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Hobby</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Hobby<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 hobby" id="hobbyList">
                                    @Html.DropDownList("hobby", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="hobbyOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.hobbyName, new { @class = "form-control", id = "hobbyName" })
                                        <span style="display: block; color:red;" id="hobbyError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitHobby" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addHolidayExperiences">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddHolidayExperiences", "Guardian", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Holiday Experience</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Country<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 country" id="countryList">
                                    @Html.DropDownList("country", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Add Photo</label>
                                <div class="col-md-8">
                                    <input type="file" name="file" id="file" />
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Experience</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.holidayExperience, new { @class = "form-control", @row = "3", @placeholder = "Please type the experiences here.", id = "experienceName" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: block; color:red;" id="experienceError"></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Start Date</label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.holidayStartDate, "dd/mm/yyyy", new { @class = "form-control date-picker", id = "datetimepicker3", @data_date_format = "dd/mm/yyyy" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: none; color:red;" id="startDateError3"></span>
                                </div>
                            </div>
                        </div>
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">End Date></label>
                                <div class="col-md-8">
                                    @Html.TextBoxFor(m => m.holidayEndDate, "dd/mm/yyyy", new { @class = "form-control date-picker", id = "datetimepicker4", @data_date_format = "dd/mm/yyyy" })
                                    <div class="form-control-focus"> </div>
                                    <span style="display: none; color:red;" id="endDateError4"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitHolidayExperience" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="addLikes">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                @using (Html.BeginForm("AddLikes", "Guardian", new { @class = "form-horizontal" }))
                {
                    @Html.HiddenFor(p => p.patientID, new { @Value = @Model.patientID, @id = "ab" })
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4>Add Like</h4>
                    </div>
                    <div class="form-body">
                        <div class="well">
                            <div class="form-group form-md-line-input has-success">
                                <label class="col-md-4 control-label" for="form_control_1">Like<a style="color:red; font-size:large">*</a></label>
                                <div class="col-md-8 like" id="likeList">
                                    @Html.DropDownList("like", null, new { @class = "form-control" })
                                    <div class="form-control-focus"> </div>
                                </div>
                                <div id="likeOthers" style='display:none; padding-bottom:20px'>
                                    <div class="col-md-4 control-label">Please specify<a style="color:red; font-size:large">*</a>: </div>
                                    <div class="col-md-8">
                                        @Html.TextBoxFor(m => m.likeName, new { @class = "form-control", id = "likeName" })
                                        <span style="display: block; color:red;" id="likeError"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" align="center">
                        <div class="row">
                            <button type="button" data-dismiss="modal" class="btn default">Cancel</button>
                            <button id="submitLike" type="submit" class="btn blue">Submit</button>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

<div id="myModal4" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><span class="fa fa-exclamation-triangle" style="color:red;" aria-hidden="true"></span> Disclaimer: Privacy Policy</h4>
            </div>
            <div class="modal-body" id="table-body">
                <div class="col-sm-12 table table-striped table-condensed cf">
                    <b>Privacy Notice</b>
                    <p>
                        This privacy notice discloses the privacy practices for this web application. This privacy notice applies solely to information collected by this website. It will notify you of the following:

                        What personally identifiable information is collected from you through the website, how it is used and with whom it may be shared.
                        What choices are available to you regarding the use of your data.
                        The security procedures in place to protect the misuse of your information.
                        How you can correct any inaccuracies in the information.
                    </p>

                    <b>Information Collection, Use, and Sharing</b>
                    <p>
                        We are the sole owners of the information collected on this site. We only have access to/collect information that you voluntarily give us via email or other direct contact from you. We will not sell or rent this information to anyone.

                        We will use your information to respond to you, regarding the reason you contacted us. We will not share your information with any third party outside of our organization, other than as necessary to fulfill your request, e.g. to ship an order.

                        Unless you ask us not to, we may contact you via email in the future to tell you about specials, new products or services, or changes to this privacy policy.
                    </p>
                    <b>Your Access to and Control Over Information</b>
                    <p>
                        You may opt out of any future contacts from us at any time. You can do the following at any time by contacting us via the email address or phone number given on our website:

                        See what data we have about you, if any.
                        Change/correct any data we have about you.
                        Have us delete any data we have about you.
                        Express any concern you have about our use of your data.
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>

<link href="~/Content/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/global/css/plugins.min.css" rel="stylesheet" type="text/css" />
<link href="~/Content/pages/css/profile-2.min.css" rel="stylesheet" type="text/css" />
<script src="~/Content/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>

<script src="~/Content/global/plugins/moment.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/clockface/js/clockface.js" type="text/javascript"></script>
<script src="~/Content/global/scripts/app.min.js" type="text/javascript"></script>
<script src="~/Content/pages/scripts/components-date-time-pickers.min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>

<link rel="stylesheet" href="~/Content/global/css/jquery.timepicker.css" type="text/css" />
<script src="~/Content/global/scripts/jquery.timepicker.js" type="text/javascript"></script>

@*Input Checks*@
<script src="~/Content/global/scripts/inputChecks.js" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        $('[data-toggle="desc"]').tooltip();
        var element = document.getElementById('album'); val = $(this).val();
        $(".date-picker").datepicker("setDate", null);      // DD-MM-YYYY
        var saveButton = $('#savePrivacy'); saveButton.prop("disabled", !this.checked);
        var clearButton = $('#clearPrivacy'); clearButton.prop("disabled", !this.checked);
        var resetButton = $('#resetPrivacy'); resetButton.prop("disabled", !this.checked);

        $('.timepicker').timepicker({
            'timeFormat': 'H:i',
            interval: 30,
            'minTime': '07:00:00',
            'maxTime': '22:00:00',
            scrollbar: true
        });

        $('.timepicker2').timepicker({
            'timeFormat': 'H:i',
            interval: 30,
            'minTime': '07:00:00',
            'maxTime': '22:00:00',
            scrollbar: true
        });

        $('#all').change(function () {
            document.getElementById('mon').checked = document.getElementById('all').checked;
            document.getElementById('tue').checked = document.getElementById('all').checked;
            document.getElementById('wed').checked = document.getElementById('all').checked;
            document.getElementById('thur').checked = document.getElementById('all').checked;
            document.getElementById('fri').checked = document.getElementById('all').checked;

            if (@Model.patient.isRespiteCare == 1)
            {
                document.getElementById('sat').checked = document.getElementById('all').checked;
                document.getElementById('sun').checked = document.getElementById('all').checked;
            }
        });

        $('#datetimepicker1').change(function () {
            dateCheck();
        });

        $('#datetimepicker2').change(function () {
            dateCheck();
        });

        $('#datetimepicker3').change(function () {
            dateCheck2();
        });

        $('#datetimepicker4').change(function () {
            dateCheck2();
        });

        function dateCheck() {
            console.log("dateCheckstart");
            var datetimepicker1Val = $("#datetimepicker1").val();
            var datetimepicker2Val = $("#datetimepicker2").val();

            var datetime = new Date();
            var dd = datetime.getDate();
            var mm = datetime.getMonth() + 1; //January is 0!

            var yyyy = datetime.getFullYear();
            if (dd < 10) {
                dd = '0' + dd;
            }
            if (mm < 10) {
                mm = '0' + mm;
            }
            var d = dd + '/' + mm + '/' + yyyy;


            var arrStartDate = datetimepicker1Val.split("/");
            var stdate = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);

            var arrEndDate = datetimepicker2Val.split("/");
            var enddate = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);


            var arrCrDate = d.split("/");
            var tdate = new Date(arrCrDate[2], arrCrDate[1], arrCrDate[0]);

            if (enddate < tdate) {
                document.getElementById("endDateError").innerHTML = "End date cannot be before today.";
                document.getElementById("endDateError").style.display = "block";

            } else {
                document.getElementById("endDateError").innerHTML = "";
                document.getElementById("endDateError").style.display = "none";
            }

            if (stdate < tdate) {
                document.getElementById("startDateError").innerHTML = "Start date cannot be before today.";
                document.getElementById("startDateError").style.display = "block";
                return false;

            } else {
                document.getElementById("startDateError").innerHTML = "";
                document.getElementById("startDateError").style.display = "none";
            }

            if (stdate > enddate && enddate != "") {
                document.getElementById("startDateError").innerHTML = "Start date cannot be after end date.";
                document.getElementById("startDateError").style.display = "block";
                return false;

            } else {
                document.getElementById("startDateError").innerHTML = "";
                document.getElementById("startDateError").style.display = "none";
            }


            if (enddate < tdate && stdate != "") {
                document.getElementById("endDateError").innerHTML = "End date cannot be before today.";
                document.getElementById("endDateError").style.display = "block";
                return false;

            } else {
                document.getElementById("endDateError").innerHTML = "";
                document.getElementById("endDateError").style.display = "none";
            }
            console.log("dateCheckend");
            return true;
        }

        function dateCheck2() {
            var datetimepicker1Val = $("#datetimepicker3").val();
            var datetimepicker2Val = $("#datetimepicker4").val();

            var arrStartDate = datetimepicker1Val.split("/");
            var stdate = new Date(arrStartDate[2], arrStartDate[1], arrStartDate[0]);

            var arrEndDate = datetimepicker2Val.split("/");
            var enddate = new Date(arrEndDate[2], arrEndDate[1], arrEndDate[0]);

            if (isNaN(enddate.getTime()) == false && isNaN(stdate.getTime()) == true) {
                document.getElementById("startDateError3").innerHTML = "If date is specify, start date cannot be empty.";
                document.getElementById("startDateError3").style.display = "block";
                return false;
            }

            if (isNaN(enddate.getTime()) == true && isNaN(stdate.getTime()) == false) {
                document.getElementById("endDateError4").innerHTML = "If date is specify, end date cannot be empty.";
                document.getElementById("endDateError4").style.display = "block";
                return false;

            } else {
                document.getElementById("endDateError4").innerHTML = "";
                document.getElementById("endDateError4").style.display = "none";
            }

            if (stdate > enddate && enddate != "") {
                document.getElementById("startDateError3").innerHTML = "Start date cannot be after end date.";
                document.getElementById("startDateError3").style.display = "block";
                return false;

            } else {
                document.getElementById("startDateError3").innerHTML = "";
                document.getElementById("startDateError3").style.display = "none";
            }

            return true;
        }

        $('#timepicker1').keydown(function (e) {
            e.preventDefault();
            return false;
        });

        $('#timepicker2').keydown(function (e) {
            e.preventDefault();
            return false;
        });

        $('#timepicker1').change(function () {
            timeCheck();
        });

        $('#timepicker2').change(function () {
            timeCheck();
        });

        function timeCheck() {
            var timepicker1Val = $("#timepicker1").val();
            var timepicker2Val = $("#timepicker2").val();

            timepicker1Val = timepicker1Val.replace(":", "");
            timepicker2Val = timepicker2Val.replace(":", "");

            timepicker1Val = Number(timepicker1Val);
            timepicker2Val = Number(timepicker2Val);

            if (timepicker1Val != 0 && timepicker2Val != 0 && timepicker2Val <= timepicker1Val) {
                document.getElementById("endTimeError").innerHTML = "End time cannot be before Start time.";
                document.getElementById("endTimeError").style.display = "block";
                return false;
            } else {
                document.getElementById("endTimeError").innerHTML = "";
                document.getElementById("endTimeError").style.display = "none";
            }
            return true;
        }

        function dayCheck() {
            var count = 0;
            if (document.getElementById('monday').value.toString() == "true")
                count++;
            if (document.getElementById('tuesday').value.toString() == "true")
                count++;
            if (document.getElementById('wednesday').value.toString() == "true")
                count++;
            if (document.getElementById('thursday').value.toString() == "true")
                count++;
            if (document.getElementById('friday').value.toString() == "true")
                count++;

            if (@Model.patient.isRespiteCare == 1)
            {
                if (document.getElementById('saturday').value)
                    count++;
                if (document.getElementById('sunday').value)
                    count++;
            }

            console.log(count);
            document.getElementById('dayError').innerHTML = "Select at least 1 day.";
            document.getElementById('dayError').style.display = "block";

            if (count == 0)
            {
                document.getElementById('dayError').innerHTML = "Select at least 1 day.";
                document.getElementById('dayError').style.display = "block";
                return false;
            } else {
                document.getElementById('dayError').innerHTML = "";
                document.getElementById('dayError').style.display = "none";
            }
            return true;
        }

        $('#submitRoutine').click(function () {
            document.getElementById('monday').value = document.getElementById('mon').checked;
            document.getElementById('tuesday').value = document.getElementById('tue').checked;
            document.getElementById('wednesday').value = document.getElementById('wed').checked;
            document.getElementById('thursday').value = document.getElementById('thur').checked;
            document.getElementById('friday').value = document.getElementById('fri').checked;

            if (@Model.patient.isRespiteCare == 1)
            {
                document.getElementById('saturday').value = document.getElementById('sat').checked;
                document.getElementById('sunday').value = document.getElementById('sun').checked;
            }

            if (dateCheck() && timeCheck() && dayCheck())
            {
                return true;
            }
            return false;
        });

        $('#submitAllergy').click(function () {
            var allergyName = document.getElementById('allergyName');
            var reactionName = document.getElementById('reactionName');

            if ($("#allergy").val() == "-1" && (allergyName.value == null || allergyName.value == ""))
            {
                document.getElementById('allergyError').innerHTML = "Please specify the allergy item.";
                document.getElementById('allergyError').style.display = "block";
                return false;
            }

            if ($("#allergy").val() != "18" && reactionName.value == "")
            {
                document.getElementById('reactionError').innerHTML = "Please type the allergic reaction.";
                document.getElementById('reactionError').style.display = "block";
                return false;
            }

            return true;
        });

        $('#submitMobility').click(function () {
            var mobilityName = document.getElementById('mobilityName');

            if ($("#mobility").val() == "-1" && (mobilityName.value == null || mobilityName.value == ""))
            {
                document.getElementById('mobilityError').innerHTML = "Please specify the mobility item.";
                document.getElementById('mobilityError').style.display = "block";
                return false;
            }
            return true;
        });

        $('#submitSocialHistory').click(function () {
            var dietName = document.getElementById('dietName');

            if ($("#diet").val() == "-1" && (dietName.value == null || dietName.value == ""))
            {
                document.getElementById('dietError').innerHTML = "Please specify the diet.";
                document.getElementById('dietError').style.display = "block";
                return false;
            }

            var educationName = document.getElementById('educationName');

            if ($("#education").val() == "-1" && (educationName.value == null || educationName.value == ""))
            {
                document.getElementById('educationError').innerHTML = "Please specify the education.";
                document.getElementById('educationError').style.display = "block";
                return false;
            }

            var liveWithName = document.getElementById('liveWithName');

            if ($("#liveWith").val() == "-1" && (liveWithName.value == null || liveWithName.value == ""))
            {
                document.getElementById('liveWithError').innerHTML = "Please specify the liveWith.";
                document.getElementById('liveWithError').style.display = "block";
                return false;
            }

            var occupationName = document.getElementById('occupationName');

            if ($("#occupation").val() == "-1" && (occupationName.value == null || occupationName.value == ""))
            {
                document.getElementById('occupationError').innerHTML = "Please specify the occupation.";
                document.getElementById('occupationError').style.display = "block";
                return false;
            }

            var petName = document.getElementById('petName');

            if ($("#pet").val() == "-1" && (petName.value == null || petName.value == ""))
            {
                document.getElementById('petError').innerHTML = "Please specify the pet.";
                document.getElementById('petError').style.display = "block";
                return false;
            }

            var religionName = document.getElementById('religionName');

            if ($("#religion").val() == "-1" && (religionName.value == null || religionName.value == ""))
            {
                document.getElementById('religionError').innerHTML = "Please specify the religion.";
                document.getElementById('religionError').style.display = "block";
                return false;
            }
            return true;
        });

        $('#submitDislike').click(function () {
            var dislikeName = document.getElementById('dislikeName');

            if ($("#dislike").val() == "-1" && (dislikeName.value == null || dislikeName.value == ""))
            {
                document.getElementById('dislikeError').innerHTML = "Please specify the dislike item.";
                document.getElementById('dislikeError').style.display = "block";
                return false;
            }
            return true;
        });

        $('#submitHabit').click(function () {
            var habitName = document.getElementById('habitName');

            if ($("#habit").val() == "-1" && (habitName.value == null || habitName.value == ""))
            {
                document.getElementById('habitError').innerHTML = "Please specify the habit item.";
                document.getElementById('habitError').style.display = "block";
                return false;
            }
            return true;
        });

        $('#submitHobby').click(function () {
            var hobbyName = document.getElementById('hobbyName');

            if ($("#hobby").val() == "-1" && (hobbyName.value == null || hobbyName.value == ""))
            {
                document.getElementById('hobbyError').innerHTML = "Please specify the hobby item.";
                document.getElementById('hobbyError').style.display = "block";
                return false;
            }
            return true;
        });

        $('#submitHolidayExperience').click(function () {
            var experienceName = document.getElementById('experienceName');
            console.log(experienceName.value == "")

            if (!dateCheck2())
                return false;

            if (experienceName.value == "" )
            {
                document.getElementById('experienceError').innerHTML = "Please type the experiences.";
                document.getElementById('experienceError').style.display = "block";
                return false;
            }

            return true;
        });

        $('#submitLike').click(function () {
            var likeName = document.getElementById('likeName');

            if ($("#like").val() == "-1" && (likeName.value == null || likeName.value == ""))
            {
                document.getElementById('likeError').innerHTML = "Please specify the like item.";
                document.getElementById('likeError').style.display = "block";
                return false;
            }
            return true;
        });

        if ($('#allergy').val() == 18)
        {
            var rest = document.getElementById('allergyRest');
            rest.style.display = 'none';
        }

        $("#privacyBtn").click(function () {
            $("#myModal4").modal('show');
        });

        $('#savePrivacy').click(function () {
            for (var i = 0; i < 19; i++)
            {
                if (document.getElementById('colName' + i.toString()).value != "")
                {
                    if (document.getElementById('oldG' + i.toString()).checked)
                        document.getElementById('newG' + i.toString()).value = true;
                    else
                        document.getElementById('newG' + i.toString()).value = false;

                    if (document.getElementById('oldD' + i.toString()).checked)
                        document.getElementById('newD' + i.toString()).value = true;
                    else
                        document.getElementById('newD' + i.toString()).value = false;

                    if (document.getElementById('oldC' + i.toString()).checked)
                        document.getElementById('newC' + i.toString()).value = true;
                    else
                        document.getElementById('newC' + i.toString()).value = false;

                    if (document.getElementById('oldS' + i.toString()).checked)
                        document.getElementById('newS' + i.toString()).value = true;
                    else
                        document.getElementById('newS' + i.toString()).value = false;
                }
            }

            return true;
        });

        $(function () {
            var privacyUpdate = $('#privacyUpdate');
            var privacyCheck = $('#privacyTick');
            var saveButton = $('#savePrivacy');
            var clearButton = $('#clearPrivacy');
            var resetButton = $('#resetPrivacy');

            privacyUpdate.on('change', function () {
                if (document.getElementById('privacyTick').checked)
                {
                    saveButton.prop("disabled", !this.checked);
                    clearButton.prop("disabled", !this.checked);
                    resetButton.prop("disabled", !this.checked);
                }
            }).trigger('change');

            privacyCheck.on('change', function () {
                if (document.getElementById('privacyUpdate').checked)
                {
                    saveButton.prop("disabled", !this.checked);
                    clearButton.prop("disabled", !this.checked);
                    resetButton.prop("disabled", !this.checked);
                }
            }).trigger('change');
        });

    });

    $("#albumType").change(function () {
        var element = document.getElementById('album');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#allergy").change(function () {
        var element = document.getElementById('allergyOthers');
        var rest = document.getElementById('allergyRest');
        val = $(this).val();

        if (val == 18)
            rest.style.display = 'none';
        else
            rest.style.display = 'block';

        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#mobility").change(function () {
        var element = document.getElementById('mobilityOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#diet").change(function () {
        var element = document.getElementById('dietOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#education").change(function () {
        var element = document.getElementById('educationOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#liveWith").change(function () {
        var element = document.getElementById('liveWithOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#occupation").change(function () {
        var element = document.getElementById('occupationOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#pet").change(function () {
        var element = document.getElementById('petOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#religion").change(function () {
        var element = document.getElementById('religionOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#dislike").change(function () {
        var element = document.getElementById('dislikeOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#habit").change(function () {
        var element = document.getElementById('habitOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#hobby").change(function () {
        var element = document.getElementById('hobbyOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#like").change(function () {
        var element = document.getElementById('likeOthers');
        val = $(this).val();
        if (val == -1)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    function OpenModalPreferences(activityTitle, preference, doctorName, doctorRemarks) {
        document.getElementById('activityTitle').value = activityTitle;
        document.getElementById('activityTitle2').value = activityTitle;
        document.getElementById('preference').value = preference;
        document.getElementById('doctorName').value = doctorName;
        document.getElementById('doctorRemarks').value = doctorRemarks;
    };

    $(function () {
        var preferencenUpdate = $('#preferenceUpdate');
        var element = document.getElementById('preference2');
        var element2 = document.getElementById('preference3');

        preferencenUpdate.on('change', function () {
            if (this.checked) {
                element.style.display = 'block';
                element2.style.display = 'block';
            }
            else {
                element.style.display = 'none';
                element2.style.display = 'none';
            }
        }).trigger('change');
    });

    // Open the Modal
    function openModal(albumName, albumPath) {
        document.getElementById('img').src = albumPath;
        document.getElementById("myModal").style.display = "block";
        document.getElementById("caption").innerHTML = albumName;
    }
    // Close the Modal
    function closeModal() {
        document.getElementById("myModal").style.display = "none";
    }

    function OpenModalPopUp(tableName, itemID) {
        document.getElementById('tableName').value = tableName;
        document.getElementById('itemID').value = itemID;
    };

    function OpenModalMedicalHistory(itemID) {
        document.getElementById('itemID2').value = itemID;
    };

    function DisableButton() {
        var saveButton = $('#savePrivacy');
        var clearButton = $('#clearPrivacy');
        var resetButton = $('#resetPrivacy');

        document.getElementById("privacyForm").reset();
        saveButton.prop("disabled", !this.checked);
        clearButton.prop("disabled", !this.checked);
        resetButton.prop("disabled", !this.checked);
    };

    function lsGF(source) {
        checkboxes = document.getElementsByName('lsG');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function lsDF(source) {
        checkboxes = document.getElementsByName('lsD');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function lsCF(source) {
        checkboxes = document.getElementsByName('lsC');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function lsSF(source) {
        checkboxes = document.getElementsByName('lsS');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function pGF(source) {
        checkboxes = document.getElementsByName('pG');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function pDF(source) {
        checkboxes = document.getElementsByName('pD');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function pCF(source) {
        checkboxes = document.getElementsByName('pC');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    function pSF(source) {
        checkboxes = document.getElementsByName('pS');
        for(var i=0; i<checkboxes.length; i++)
            checkboxes[i].checked = source.checked;
    }

    /*
    var slideIndex = 1;
    showSlides(slideIndex);
    // Next/previous controls
    function plusSlides(n) {
        showSlides(slideIndex += n);
    }
    // Thumbnail image controls
    function currentSlide(n) {
        showSlides(slideIndex = n);
    }
    function showSlides(n) {
        var i;
        var slides = document.getElementsByClassName("mySlides");
        var dots = document.getElementsByClassName("demo");
        var captionText = document.getElementById("caption");
        if (n > slides.length) { slideIndex = 1 }
        if (n < 1) { slideIndex = slides.length }
        for (i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        for (i = 0; i < dots.length; i++) {
            dots[i].className = dots[i].className.replace(" active", "");
        }
        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].className += " active";
        captionText.innerHTML = dots[slideIndex - 1].alt;
    }*/


</script>