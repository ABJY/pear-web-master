@model NTU_FYP_REBUILD_17.ViewModels.AdminManageAccountViewModel

@{
    ViewBag.Title = "Update User";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";

    if (ViewBag.Modal == "true")
    {
        <script type="text/javascript">
            $(window).on('load', function() {
                $('#MyModal').modal('show');
            });
        </script>
    }
}
<div class="portlet light ">
    <div class="portlet-title tabbable-line">
        <div class="caption caption-md">
            <i class="icon-globe theme-font hide"></i>
            <span class="caption-subject font-blue-madison bold uppercase">Profile Account</span>
        </div>
        <ul class="nav nav-tabs">
            @*<li class="@ViewBag.Info">
                <a href="#tab_1_1" data-toggle="tab">Personal Info</a>
            </li>
            <li class="@ViewBag.Pass">
                <a href="#tab_1_3" data-toggle="tab">Reset Password</a>
            </li>*@
        </ul>
    </div>
    <div class="portlet-body">
        @*<div class="tab-content">
            <div class="tab-pane @ViewBag.Info" id="tab_1_1">*@
                @using (Html.BeginForm("UpdateUser2", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "form1" }))
                {
                    @Html.HiddenFor(p => p.id, new { @Value = @Model.User.Id, @id = "ab" })
                    <div align="center">
                        <h3>Personal Information</h3>
                    </div>
                    <div class="col-md-offset-2">
                        <p style="color:red">@ViewData["Error1"]</p>
                        @Html.ValidationSummary("", new { @class = "text-danger" })
                    </div>
                    <hr />
                    <div class="form-group">
                        <div class="col-md-2 control-label">User Type<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.DropDownList("userType", null, new { @class = "form-control" })
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-2 control-label" type="radio">Account Locked</label>
                        <div class="col-md-10">
                            @if (Model.isLocked == 1)
                            {
                                @Html.CheckBoxFor(m => m.lockBool, new { @id = "option1", @checked = "checked" });
                            }
                            else
                            {
                                @Html.CheckBoxFor(m => m.lockBool, new { @id = "option1" });
                            }
                        </div>
                    </div>
                    <div class="form-group" id="reason">
                        <div class="col-md-2 control-label">Account lock reason<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.reason, new { @class = "form-control", @Value = @Model.User.reason, @id = "reasonValue" })
                            <span style="display: block; color:red;" id="error"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Email<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.Email, new { @class = "form-control", @Value = @Model.User.Email, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Preferred Name<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.preferredName, new { @class = "form-control", @Value = @Model.User.preferredName, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">First Name<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.firstName, new { @class = "form-control", @Value = @Model.User.firstName, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Last Name<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.lastName, new { @class = "form-control", @Value = @Model.User.lastName, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Address<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.address, new { @class = "form-control", @Value = @Model.User.address, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Phone No<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.handphoneNo, new { @class = "form-control", @Value = @Model.User.PhoneNumber, required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Office No</div>
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.officeNo, new { @class = "form-control", @Value = @Model.User.officeNo })
                        </div>
                    </div>
                    @*
                    <div class="form-group">
                        <label class="col-md-2 control-label" type="radio">Gender</label>
                        <div class="col-md-10">
                            @if (Model.User.gender == "Male")
                            {
                                @Html.RadioButtonFor(m => m.gender, "Male", new { @id = "option1", @checked = "checked" })@Html.Label("Male")
                                @Html.RadioButtonFor(m => m.gender, "Female", new { @id = "option2" })@Html.Label("Female")
                            }
                            else
                            {
                                @Html.RadioButtonFor(m => m.gender, "Male", new { @id = "option3" })@Html.Label("Male")
                                @Html.RadioButtonFor(m => m.gender, "Female", new { @id = "option4", @checked = "checked" })@Html.Label("Female")

                            }
                        </div>
                    </div>
                    *@
                    <div class="margiv-top-10 text-center">
                        <input class="space btn grey" type="button" onclick="window.location.replace('@Url.Action("Index", "Account")')" value="Cancel" />
                        <input class="space btn grey" type="button" onclick="window.location.replace('@Url.Action("SendResetEmail", "Account", new { id = Model.User.Id })')" value="Send reset password link to email" />
                        <input id="submit" type="submit" class="space btn btn-primary" value="Save Changes" />
                    </div>
                }
            </div>
            @*
            <div class="tab-pane @ViewBag.Pass" id="tab_1_3">
                @using (Html.BeginForm("ResetPw", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                {
                    @Html.HiddenFor(p => p.id, new { @Value = @Model.User.Id, @id = "a" });
                    <div align="center">
                        <h3>Change Password</h3>
                    </div>
                    <div class="col-md-offset-2">
                        <p style="color:red">@ViewData["Error"]</p>
                    </div>
                    <hr />
                    @Html.HiddenFor(model => model.Code)
                    <div class="form-group">
                        @Html.LabelFor(m => m.secretQuestion, new { @class = "col-md-2 control-label" })
                        <div class="col-md-10">
                            @Html.TextBoxFor(m => m.secretQuestion, new { @class = "form-control", @Value = @Model.User.secretQuestion, @readonly = true })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Secret Answer<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.PasswordFor(m => m.secretAnswer, new { @class = "form-control", required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Password<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.PasswordFor(m => m.Password, new { @class = "form-control", required = "required" })
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-2 control-label">Confirm Password<a style="color:red; font-size:large">*</a></div>
                        <div class="col-md-10">
                            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control", required = "required" })
                        </div>
                    </div>
                    <div class="margiv-top-10 text-center">
                        <input class="space btn grey" type="button" onclick="window.location.replace('@Url.Action("Index", "Home")')" value="Cancel" />
                        <input id="submit2" type="submit" class="space btn btn-primary" value="Save Changes" />
                    </div>
                }
            </div>
        </div>
    </div>*@
</div>

<script src="~/Content/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/js.cookie.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js" type="text/javascript"></script>
<script src="~/Content/global/plugins/jquery.sparkline.min.js" type="text/javascript"></script>
<script src="~/Content/global/scripts/app.min.js" type="text/javascript"></script>
<script src="~/Content/pages/scripts/profile.min.js" type="text/javascript"></script>

<script>
    $(document).ready(function () {
        var element = document.getElementById('reason');
        if (document.getElementById('option1').checked)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $("#option1").change(function () {
        var element = document.getElementById('reason');
        val = $(this).val();
        
        if (document.getElementById('option1').checked)
            element.style.display = 'block';
        else
            element.style.display = 'none';
    });

    $('#submit').click(function () {
        if (document.getElementById('option1').checked && document.getElementById('reasonValue').value == "") {
            document.getElementById('error').innerHTML = "Please specify the reason.";
            document.getElementById('error').style.display = "block";
            return false;
        }
        return true;
    });
</script>